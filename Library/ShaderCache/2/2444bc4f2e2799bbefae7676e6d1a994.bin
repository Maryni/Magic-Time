-------------------------------------------------------------------------------
----
----	OVERVIEW "Tutorial_4\A_Resources_3"
----
----	OPEN CHAR OVERVIEW
----
----	1. function Bind
----
----	2. Bind / Start the next Quest(s)
----
-------------------------------------------------------------------------------


-------------------------------------------------------------------------------
----	1. function Bind
-------------------------------------------------------------------------------
function Bind()
	return true
end

function CheckStart()
	return true
end

function Start()
	local CartCount = BuildingGetCartCount("#Smithy")
	local CurrentCart
	local RemainingSpace = 0
	for CurrentCart=0,CartCount do
		BuildingGetCart("#Smithy",CurrentCart,"MyCart")
		RemainingSpace = RemainingSpace + GetRemainingInventorySpace("MyCart","Iron")
	end
	SetData("InventorySpace",RemainingSpace)

	while true do
		local MinMoney = 1500
		if GetMoney("#Player") < MinMoney then
			local GiveMoney = 1500 - GetMoney("#Player")
			CreditMoney("#Player",GiveMoney,"Buy Resources Credit")
		end
		
		local CartCount = BuildingGetCartCount("#Smithy")
		local CurrentCart
		local RemainingSpace = 0
		for CurrentCart=0,CartCount do
			BuildingGetCart("#Smithy",CurrentCart,"MyCart")
			RemainingSpace = RemainingSpace + GetRemainingInventorySpace("MyCart","Iron")
		end
		if (RemainingSpace ~= GetData("InventorySpace")) then
			local IronCount = 0
			for CurrentCart=0,CartCount-1 do
				BuildingGetCart("#Smithy",CurrentCart,"MyCart")
				IronCount = IronCount + GetItemCount("MyCart","Iron")
			end
			if (IronCount > 0) then
				if (IronCount >= 2) then
					HideTutorialBox()
					break
				end
			el